<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Results - Checkmate</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap');
        :root {
            --brand-gradient: linear-gradient(135deg, #ff4b81 0%, #bc2a8d 100%);
            --dark-bg: #000; --card-bg: #111; --border: #222;
        }
        body { font-family: 'Poppins', sans-serif; background: var(--dark-bg); color: #fff; margin: 0; padding: 20px; display: flex; flex-direction: column; align-items: center; }
        .header { margin: 30px 0; text-align: center; cursor: pointer; }
        .header img { width: 120px; }
        .result-container { width: 100%; max-width: 550px; }
        
        .status-banner { padding: 15px; border-radius: 18px; text-align: center; font-weight: 700; margin-bottom: 25px; text-transform: uppercase;}
        .match { background: var(--brand-gradient); }
        .new { background: #333; }

        .notify-box { background: rgba(255,255,255,0.05); border: 1px dashed #444; padding: 20px; border-radius: 20px; margin-bottom: 30px; text-align: center; }
        .notify-box input { width: 80%; padding: 12px; border-radius: 10px; border: 1px solid #333; background: #000; color: #fff; margin: 10px 0; }

        .history-card { background: var(--card-bg); border: 1px solid var(--border); border-radius: 24px; padding: 20px; margin-bottom: 25px; }
        .history-card img { width: 100%; border-radius: 16px; margin-bottom: 20px; border: 1px solid #333; }
        
        .meta-label { color: #a0a6b5; font-size: 0.7rem; font-weight: 700; text-transform: uppercase; margin-bottom: 4px; }
        .meta-value { font-size: 0.95rem; margin-bottom: 15px; color: #eee; }
        .timestamp { font-size: 0.75rem; color: #ff4b81; font-weight: 600; margin-bottom: 15px; display: block; }

        .btn-contact {
            background: #fff; color: #000; border: none; padding: 12px; 
            border-radius: 12px; font-weight: 700; cursor: pointer; width: 100%;
            margin-top: 10px; font-size: 0.85rem;
        }
        
        .btn-back { background: transparent; color: #fff; border: 1px solid #333; padding: 18px; border-radius: 18px; width: 100%; cursor: pointer; font-weight: 700; margin-top: 20px; }
    </style>
</head>
<body>
    <div class="header" onclick="window.location.href='index.html'"><img src="logo.png"></div>

    <div class="result-container" id="content-area"></div>

    <div class="result-container"><button class="btn-back" onclick="window.location.href='index.html'">START NEW SEARCH</button></div>

    <script>
        const resultData = JSON.parse(sessionStorage.getItem('lastResult'));
        const area = document.getElementById('content-area');

        function handleContact() {
            const email = prompt("Enter your email address so they can reply to you:");
            if (email) {
                alert("Request Sent! We have notified the original submitter. If they choose to connect, they will reach out to " + email);
                // In future, this would fetch('/notify-submitter')
            }
        }

        if (resultData) {
            const banner = document.createElement('div');
            banner.className = `status-banner ${resultData.status === 'match' ? 'match' : 'new'}`;
            banner.innerText = resultData.status === 'match' ? 'Database Match Found' : 'First Entry Recorded';
            area.appendChild(banner);

            const notify = document.createElement('div');
            notify.className = 'notify-box';
            notify.innerHTML = `
                <div style="font-weight:700;">STAY UPDATED</div>
                <input type="email" id="user-email" placeholder="Your email...">
                <button style="background:#fff; border:none; padding:8px 15px; border-radius:8px; font-weight:700; cursor:pointer;" onclick="alert('Subscription active!')">NOTIFY ME OF NEW MATCHES</button>
            `;
            area.appendChild(notify);

            const history = [...resultData.observations].reverse();
            history.forEach((sighting) => {
                const card = document.createElement('div');
                card.className = 'history-card';
                card.innerHTML = `
                    <img src="${sighting.image}">
                    <span class="timestamp">RECORDED ON: ${sighting.submitted_on || 'January 02, 2026'}</span>
                    <div class="meta-label">Location</div>
                    <div class="meta-value">${sighting.city || 'Unknown'}</div>
                    <div class="meta-label">Relationship Dates</div>
                    <div class="meta-value">${sighting.date || 'Not specified'}</div>
                    <div class="meta-label">Details</div>
                    <div class="meta-value">${sighting.text || 'No comments.'}</div>
                    <button class="btn-contact" onclick="handleContact()">CONTACT SUBMITTER</button>
                `;
                area.appendChild(card);
            });
        }
    </script>
</body>
</html>